<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Components — Dust</title><link href="https://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/assets/main.css"><link rel="canonical" href="/docs/templates/components/"><meta property="og:title" content="Components "/><meta property="og:url" content="http://dust.l4.se/docs/templates/components/"/><meta property="og:site_name" content="Dust"></head><body> <script>!function(e,a,n,t,c,s,o){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,s=a.createElement(n),o=a.getElementsByTagName(n)[0],s.async=1,s.src=t,o.parentNode.insertBefore(s,o)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-27022391-3","l4.se"),ga("send","pageview")</script><nav class="navbar navbar-main" role="navigation"><div class="navbar-header"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#nav"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="http://dust.l4.se/"> <span>Dust</span> </a></div><div class="collapse navbar-collapse" id="nav"><ul class="nav navbar-nav"><li><a href="http://dust.l4.se/quick-start/">Quick Start</a></li><li class="active"><a href="http://dust.l4.se/docs/">Documentation</a></li></ul><div class="navbar-right creator"> <a href="http://levelfour.se"><img src="http://dust.l4.se/images/levelfour.svg" class="levelfour-logo" width="102" height="30" alt="Level Four AB"></a></div></div> </nav><div class="site-cover site-cover-default"> <section><div class="container"><h1><a href="http://dust.l4.se/docs/">Documentation</a></h1></div> </section></div><article><div class="container row"><div class="col-xs-12 col-md-9"> <header><h1>Components</h1> </header> <section><p>Templates may reference components that live in different <a href="http://dust.l4.se/docs/namespaces/">namespaces</a>.</p><h2 id="using-components">Using components</h2><p>Components are referenced from a template and it’s possible to pass attributes and parameters to it.</p><p>Attributes are passed via the opening XML-element:</p><div class="highlight"><pre><code class="xml">... xmlns:d="dust:common" ...

<span class="nt">&lt;d:if</span> <span class="na">test=</span><span class="s">"${test}"</span><span class="nt">&gt;</span></code></pre></div><p>Parameters are passed via XML-elements in the namespace <code>dust:parameters</code>:</p><div class="highlight"><pre><code class="xml">... xmlns:p="dust:parameters" ...

<span class="nt">&lt;p:else&gt;</span>Hi!<span class="nt">&lt;/p:else&gt;</span></code></pre></div><p><a href="http://dust.l4.se/docs/namespaces/common/#components" class="btn btn-lg btn-outline">More about the standard components</a></p><h2 id="creating-a-component">Creating a component</h2><p>Classes are regular classes that are annotated with <code>@Component</code>. Components are automatically discovered within registered namespaces.</p><p>Here is a tiny component that says hello to a user:</p><div class="highlight"><pre><code class="java"><span class="nd">@Component</span><span class="o">(</span><span class="s">"hello"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloComponent</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

	<span class="nd">@PrepareRender</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">prepare</span><span class="o">(</span><span class="nd">@TemplateParam</span><span class="o">(</span><span class="s">"name"</span><span class="o">)</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></div><p>With a template named <code>HelloComponent.xml</code> in the same package:</p><div class="highlight"><pre><code class="xml"><span class="nt">&lt;span</span> <span class="na">xmlns:d=</span><span class="s">"dust:common"</span><span class="nt">&gt;</span>
	Hello ${name}!

	<span class="nt">&lt;d:if</span> <span class="na">test=</span><span class="s">"${name == 'Cookie monster'}"</span><span class="nt">&gt;</span>
		Your name is awesome!
	<span class="nt">&lt;/d:if&gt;</span>
<span class="nt">&lt;/span&gt;</span></code></pre></div><p>Calling this component:</p><div class="highlight"><pre><code class="xml"><span class="nt">&lt;namespace:hello</span> <span class="na">name=</span><span class="s">"your name here"</span> <span class="nt">/&gt;</span></code></pre></div><h2 id="annotations">Annotations</h2><h3 id="preparerender"><code>@PrepareRender</code></h3><p>Methods annotated with <code>@PrepareRender</code> are called just before a component is rendered. If several methods are annotated Dust will select the best one to invoke. This is useful to allow for several ways to use a components, such as follows:</p><div class="highlight"><pre><code class="java"><span class="nd">@PrepareRender</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">prepare</span><span class="o">(</span><span class="nd">@TemplateParam</span><span class="o">(</span><span class="s">"names"</span><span class="o">)</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span> <span class="cm">/* ... */</span> <span class="o">}</span>

<span class="nd">@PrepareRender</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">prepare</span><span class="o">(</span><span class="nd">@TemplateParam</span><span class="o">(</span><span class="s">"name"</span><span class="o">)</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span> <span class="cm">/* ... */</span> <span class="o">}</span></code></pre></div><h3 id="templateparamstring"><code>@TemplateParam(String)</code></h3><p>This annotation is used to receive a value from the calling template. This can either be used with <code>@PrepareRender</code> or on a setter method.</p></section></div><div class="col-xs-12 col-md-3"> <aside class="page-nav"><h2>Contents</h2><ul><li class=""><h4><a href="http://dust.l4.se/docs/getting-started/">Getting Started</a></h4></li><li class=""><h4><a href="http://dust.l4.se/docs/namespaces/">Namespaces</a></h4></li><li class="expanded"><h4><a href="http://dust.l4.se/docs/templates/">Templates</a></h4><ul><li class="expanded active"> <a href="http://dust.l4.se/docs/templates/components/">Components</a></li></ul></li></ul></aside></div></div> </article><script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script><script src="/assets/main.js"></script></body></html>